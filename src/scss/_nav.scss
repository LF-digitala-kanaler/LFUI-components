@import "bootstrap/scss/_nav.scss";

/**
 * This fix is intended to correct the spacing between the nav links' underline (background-image) and text.
 * Line height allows us to manipulate this, but also causes some bad side-effects in the many different
 * variations that nav-links come in. Hence, we only want to target those that are not special enough.
 */

.nav-link {
  padding-bottom: calc(#{$nav-link-padding-y} - 2px);
  text-decoration: none;
}

.nav:not(.navbar-nav):not(.nav-tabs):not(.nav-pills):not(.nav-tight):not(.nav-stacked):not(.nav-two-col):not(.nav-sub):not(.nav-sub-gray) {
  .nav-link {
    display: inline-block;
    padding: 0;
    line-height: 1.2;

    // Don't want to break these, though
    &.primary-link,
    &.primary-link-left,
    &.btn-link-lg,
    &.btn-link-lg-left {
      line-height: 1.3;
    }
  }
}

// disabled
.nav-link.disabled,
.nav-link[disabled] {
  &,
  &:hover,
  &:focus,
  &:active {
    color: $nav-link-disabled-color;
    background-image:
      linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0%) 50%,
        currentcolor 50%
      );
  }
}

// Nav inline - removed from Bootstrap alpha-6, but we still needs it.

.nav-inline {
  .nav-item,
  .nav-link {
    display: inline-flex;
  }

  .nav-item + .nav-item,
  .nav-link + .nav-link {
    margin-left: $nav-link-padding-x - 1rem;
  }
}

/**
 * Redesign tabs and pills
 */
.nav-tabs .nav-link,
.nav-pills .nav-link {
  font-family: $font-family-sans-serif;

  &,
  &:hover,
  &:focus,
  &:active {
    position: relative;
    font-size: $font-size-lg;
    color: inherit;
    text-decoration: none;
    background: rgba(0, 0, 0, 3%);
    border: solid $nav-tabs-border-color;
    border-width: 0 0 $nav-tabs-border-width;
    opacity: 1;
    transition: 75ms linear;
    transition-property: border-color, background, color;
  }

  &.active,
  &.active:hover,
  &.active:focus,
  &.active:active {
    font-weight: 700;
    color: $blue;
    background-color: $white;
    border-bottom-color: $white;
  }

  &:hover,
  &:active {
    color: $blue;
    border-bottom-color: $blue;
  }

  &.active {
    cursor: default;
  }

  &.disabled {
    &,
    &.active,
    &:hover,
    &.active:hover,
    &.active:focus,
    &.active:active {
      color: $nav-link-disabled-color;
      background: rgba(0, 0, 0, 3%);
      border-bottom: 2px solid transparent;
    }
  }
}

.nav-tabs,
.nav-pills {
  .nav-item {
    + .nav-item {
      margin-left: $nav-item-margin;
    }
  }
}

.nav-pills .nav-link {
  color: $gray;
  border-bottom-color: $smoke;

  &.active,
  &.active:hover,
  &.active:focus,
  &.active:active {
    font-weight: 700;
    border-bottom-color: $blue;
  }

  &,
  &:hover,
  &:focus,
  &:active,
  &.active,
  &.active:hover,
  &.active:focus,
  &.active:active {
    background: transparent;
  }

  &:active {
    color: rgba($link-hover-color, .6);
    transition: none;
  }

  &.disabled {
    &,
    &.active,
    &:hover,
    &.active:hover,
    &.active:focus,
    &.active:active {
      color: $nav-link-disabled-color;
      background: transparent;
      border-bottom: 2px solid $smoke;
    }
  }
}

.nav-tight .nav-link {
  padding: 1rem 1rem calc(1rem - #{$border-width});
}

.nav-small .nav-link {
  padding: .75rem 1.125rem calc(.75rem - #{$border-width});
}
// Classes for JS-responsitivity
.nav-stacked {
  float: none;
}

.nav-two-col {
  column-count: 2;
  column-gap: 1rem;

  li {
    -webkit-column-break-inside: avoid;
    page-break-inside: avoid;
    break-inside: avoid;
    overflow: hidden;
  }
}

.nav-tabs-gray {
  @extend .nav-tabs;

  .nav-link {
    background: $nav-tabs-grey-bg-color;

    &:focus,
    &:active,
    &.active,
    &.active:hover,
    &.active:focus,
    &.active:active {
      font-weight: 700;
      background: $body-bg;
      border-color: $body-bg;
    }

    &:hover {
      background: $nav-tabs-grey-bg-color;
    }

    &.active {
      cursor: default;
    }

    &.disabled {
      &,
      &.active,
      &:hover,
      &.active:hover,
      &.active:focus,
      &.active:active {
        background: $nav-tabs-grey-bg-color;
      }
    }
  }
}

.nav-sub {
  @extend .nav-inline;
  display: flex;
  flex-basis: inherit;
  flex-wrap: wrap;
  padding: .5rem 1rem .25rem;

  background: $white;

  .nav-link {
    padding: 0;
    margin-right: 1rem;
    margin-bottom: .5rem;
    margin-left: 0 !important;
    color: $gray;
    border-bottom-color: $smoke;

    &,
    &:hover,
    &:focus,
    &.active,
    &:active {
      position: relative;
      color: inherit;
      text-decoration: none;
      border: solid $nav-tabs-border-color;
      border-width: 0 0 $nav-tabs-border-width;
      opacity: 1;
      transition: 75ms linear;
      transition-property: border-color, background, color;
    }

    &.active,
    &:hover,
    &.active:hover,
    &.active:focus,
    &.active:active {
      color: $blue;
      border-bottom-color: $blue;
    }

    &:active {
      color: rgba($link-hover-color, .6);
      transition: none;
    }

    &.active {
      cursor: default;
    }

    &.disabled:not(.primary-link):not(.btn-link-lg):not(.btn-link-lg-left) {
      color: $nav-link-disabled-color;
      border-bottom: $smoke;

      &.active,
      &:hover,
      &.active:hover,
      &.active:focus,
      &.active:active {
        color: $nav-link-disabled-color;
        border-bottom-color: $smoke;
      }
    }
  }
}

.nav-sub-gray {
  @extend .nav-sub;

  background: $body-bg;
}

// With separator
.nav .nav-link.separator,
.nav .nav-item.separator {
  + .nav-link.separator,
  + .nav-item.separator {
    position: relative;
    margin-left: 1.5rem;

    &::before {
      position: absolute;
      right: 100%;
      width: 1px;
      height: calc(#{$font-size-lg} + .5rem);
      margin-right: .75rem;
      pointer-events: none;
      content: " ";
      background-color: $silver;
    }
  }
}

.nav-page {
  @extend .nav-tabs;

  border-bottom: 2px solid $border-color;

  .nav-item {
    margin-right: 4px;
    margin-left: 0 !important;
    border: 2px solid $border-color;
  }

  .nav-link,
  .nav-link.active,
  .nav-link:hover,
  .nav-link:focus {
    padding: .656rem 1.375rem;
    margin-right: 0;
    font-size: 1.125rem;
    cursor: pointer;
    background-color: $body-bg;
    border: 0;
    @include font-smoothing();

    &.active {
      background-color: $white;
      border-bottom: 0;
      box-shadow: 0 2px $white;

      &:hover {
        box-shadow: 0 2px $white;
      }
    }

    &:hover {
      box-shadow: 0 2px $blue;
    }
  }

  &.nav-page-gray {
    .nav-link,
    .nav-link.active,
    .nav-link:hover {
      background-color: $white;

      &.active {
        background-color: $body-bg;
        box-shadow: 0 2px $body-bg;
      }
    }
  }
}

/**
 * Fix for primary-links inside navs that loose their padding.
 * 1. Important here because the gigantic :not rule at the top is pretty reluctant to let anyone else through.
 */

.nav-link.primary-link {
  padding-right: 3px !important; /* 1 */
}

// Overflow scroll for reponsive supprt

.nav-overflow {
  width: 100%;
  overflow: -moz-scrollbars-none;
  -ms-overflow-style: none;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;

  &::-webkit-scrollbar {
    display: none;
    width: 0 !important;
    height: 0;
  }

  @include media-breakpoint-down(md) {
    position: relative;
    bottom: -1px;
  }

  .nav-tabs {
    display: flex;
    flex-wrap: nowrap;
    align-items: flex-end;
    white-space: nowrap;

    // needed to hide the scrollbar spacing in safari and chrome on Ios

    .nav-item {
      @include media-breakpoint-down(md) {
        margin-bottom: -1px;
      }
    }
  }

  .nav-page {
    .nav-item {
      @include media-breakpoint-down(md) {
        margin-bottom: -2px;
      }
    }
  }

  .nav-link {
    display: inline-block;
  }
}
